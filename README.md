# Curately

> Your own AI-curated tech newsletter — personalized, automated, and free to run.

Curately collects articles from RSS feeds every morning, scores them against your interests using Gemini 2.5 Flash, and serves a clean web UI where you can browse, like, bookmark, and track how your interests evolve over time.

## Features

- **Daily auto-curation** — RSS feeds collected and filtered by relevance every morning
- **AI-powered summaries** — Concise Korean summaries generated by Gemini 2.5 Flash
- **Feedback loop** — Likes refine future filtering; bookmarks trigger detailed summaries
- **Rewind** — Weekly reports analyze your reading patterns and surface emerging interests
- **Archive** — Browse past newsletters by date
- **Multi-user ready** — Google OAuth via Supabase Auth (single-user MVP out of the box)

## Tech Stack

| Layer | Technology |
|-------|-----------|
| Backend | FastAPI + Uvicorn |
| Frontend | React (Vite) + Tailwind CSS |
| Database | Supabase (PostgreSQL) |
| Auth | Supabase Auth (Google OAuth) |
| LLM | Gemini 2.5 Flash |
| Scheduler | APScheduler |

## Getting Started

### Prerequisites

- Python 3.14+
- Node.js 20+
- [uv](https://docs.astral.sh/uv/) (Python package manager)
- A [Supabase](https://supabase.com/) project
- A [Gemini API key](https://ai.google.dev/)

### Setup

```bash
# Clone the repository
git clone git@github.com:songyoungin/curately.git
cd curately

# Backend
cp .env.example .env          # Fill in your API keys
uv sync                       # Install Python dependencies
uv run pre-commit install     # Install pre-commit hooks
uv run pre-commit install --hook-type commit-msg

# Frontend
cd frontend
npm install                   # Install Node dependencies
cd ..
```

### Configuration

#### Environment Variables

All environment variables are managed in a single `.env` at the project root. The frontend automatically reads `SUPABASE_URL` and `SUPABASE_ANON_KEY` from the same file — no separate `frontend/.env` needed (Vite config maps them to `VITE_` variables).

Copy `.env.example` to `.env` and fill in:

```env
GEMINI_API_KEY=your-gemini-api-key
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_JWT_SECRET=your-jwt-secret
```

Edit `config.yaml` to add your RSS feeds and adjust settings.

#### Google OAuth Setup

To enable Google sign-in, configure both Google Cloud and Supabase:

1. **Google Cloud Console** ([console.cloud.google.com](https://console.cloud.google.com/))
   - Create an OAuth 2.0 client ID (Web application)
   - Add authorized redirect URI: `https://<your-project-ref>.supabase.co/auth/v1/callback`
   - Copy the **Client ID** and **Client Secret**

2. **Supabase Dashboard** ([supabase.com/dashboard](https://supabase.com/dashboard))
   - **Authentication > Providers > Google**: Enable and paste Client ID + Secret
   - **Settings > API**: Copy **JWT Secret** → paste into backend `.env` as `SUPABASE_JWT_SECRET`
   - **URL Configuration > Site URL**: `http://localhost:5173`
   - **URL Configuration > Redirect URLs**: Add `http://localhost:5173`

### Run

```bash
# Start the backend (includes scheduler)
uv run uvicorn backend.main:app --reload

# Start the frontend (in a separate terminal)
cd frontend
npm run dev
```

### Development Mode (MSW)

By default, `npm run dev` starts with [MSW](https://mswjs.io/) mocking all API endpoints. This lets you develop the frontend without a running backend.

To connect to the real backend instead, set `VITE_ENABLE_MSW=false`:

```bash
# Run frontend with real backend (no mocks)
VITE_ENABLE_MSW=false npm run dev
```

| Mode | MSW | Backend needed | Auth |
|------|-----|---------------|------|
| `npm run dev` (default) | On | No | Auto-login with mock user |
| `VITE_ENABLE_MSW=false npm run dev` | Off | Yes | Real Google OAuth |
| `npm run build` (production) | Off | Yes | Real Google OAuth |

## Project Structure

```
curately/
├── backend/
│   ├── main.py               # FastAPI entrypoint
│   ├── config.py             # Settings from config.yaml + .env
│   ├── supabase_client.py    # Supabase client initialization
│   ├── routers/              # API route handlers
│   │   ├── feeds.py          # Feed CRUD endpoints
│   │   ├── articles.py       # Article listing & interactions
│   │   ├── newsletters.py    # Newsletter date-based queries
│   │   ├── interests.py      # User interest management
│   │   └── rewind.py         # Weekly Rewind reports
│   ├── services/             # Business logic
│   │   ├── collector.py      # RSS fetch & deduplication
│   │   ├── scorer.py         # Gemini batch relevance scoring
│   │   ├── summarizer.py     # Korean summary generation
│   │   ├── pipeline.py       # Daily pipeline orchestrator
│   │   ├── interests.py      # Interest weight management
│   │   └── rewind.py         # Weekly analysis generation
│   └── schemas/              # Pydantic request/response models
├── frontend/src/
│   ├── pages/                # Today, Archive, Bookmarks, Rewind, Settings
│   ├── components/           # ArticleCard, NavBar, TrendChart, etc.
│   ├── hooks/                # useNewsletter, useArticleInteractions, etc.
│   ├── mocks/                # MSW mock data & handlers for development
│   └── api/client.ts         # Typed API client
├── tests/                    # pytest test suite (119 tests)
├── frontend/e2e/             # Playwright E2E tests
├── config.yaml               # RSS feeds & app configuration
└── docs/                     # Design, deployment, QA & security docs
```

## Documentation

- [Design Document](docs/plans/2026-02-13-tech-newsletter-design.md) — Full architecture, schema, API, and pipeline design
- [Implementation Phases](docs/plans/implementation-phases.md) — Task breakdown and acceptance criteria
- [Deployment Guide](docs/deployment.md) — Local macOS deployment steps
- [Security Audit](docs/security-audit.md) — OWASP review and dependency scan
- [Performance Report](docs/performance.md) — API response times and bundle analysis
- [QA Test Report](docs/qa-test-report.md) — Integration testing results

## License

MIT
